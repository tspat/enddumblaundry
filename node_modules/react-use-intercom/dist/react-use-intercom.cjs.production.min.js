"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var n="undefined"==typeof window,o=function(e){if(!n&&window.Intercom){for(var t=arguments.length,o=new Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];return window.Intercom.apply(null,[e].concat(o))}},r=e.createContext({boot:function(){},shutdown:function(){},hardShutdown:function(){},update:function(){},hide:function(){},show:function(){},showMessages:function(){},showNewMessages:function(){},getVisitorId:function(){return""},startTour:function(){},trackEvent:function(){}}),a=function(e){return t({company_id:e.companyId,name:e.name,created_at:e.createdAt,plan:e.plan,monthly_spend:e.monthlySpend,user_count:e.userCount,size:e.size,website:e.website,industry:e.industry},e.customAttributes)},u=function(e){return{type:e.type,image_url:e.imageUrl}},i=function(e){return function e(t){return Object.keys(t).forEach((function(n){t[n]&&"object"==typeof t[n]?e(t[n]):void 0===t[n]&&delete t[n]})),t}(t({},{custom_launcher_selector:(n=e).customLauncherSelector,alignment:n.alignment,vertical_padding:n.verticalPadding,horizontal_padding:n.horizontalPadding,hide_default_launcher:n.hideDefaultLauncher,session_duration:n.sessionDuration,action_color:n.actionColor,background_color:n.backgroundColor},function(e){var n;return t({email:e.email,user_id:e.userId,created_at:e.createdAt,name:e.name,phone:e.phone,last_request_at:e.lastRequestAt,unsubscribed_from_emails:e.unsubscribedFromEmails,language_override:e.languageOverride,utm_campaign:e.utmCampaign,utm_content:e.utmContent,utm_medium:e.utmMedium,utm_source:e.utmSource,utm_term:e.utmTerm,avatar:e.avatar&&u(e.avatar),user_hash:e.userHash,company:e.company&&a(e.company),companies:null==(n=e.companies)?void 0:n.map(a)},e.customAttributes)}(e)));var n};exports.IntercomProvider=function(a){var u=a.appId,c=a.autoBoot,s=void 0!==c&&c,d=a.autoBootProps,l=a.children,f=a.onHide,m=a.onShow,h=a.onUnreadCountChange,p=a.shouldInitialize,w=void 0===p?!n:p,g=a.apiBase,v=a.initializeDelay,b=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t.indexOf(n=a[o])>=0||(r[n]=e[n]);return r}(a,["appId","autoBoot","autoBootProps","children","onHide","onShow","onUnreadCountChange","shouldInitialize","apiBase","initializeDelay"]),_=e.useRef(!1),y=e.useRef(!1);Object.keys(b);var C=e.useCallback((function(e){if((window.Intercom||w)&&!_.current){var n=t({app_id:u},g&&{api_base:g},e&&i(e));window.intercomSettings=n,o("boot",n),_.current=!0}}),[g,u,w]);n||!w||y.current||(function(e,t){void 0===t&&(t=0);var n=window,o=n.Intercom;if("function"==typeof o)o("reattach_activator"),o("update",n.intercomSettings);else{var r=document,a=function e(){e.c(arguments)};a.q=[],a.c=function(e){a.q.push(e)},n.Intercom=a;var u=function(){setTimeout((function(){var t=r.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://widget.intercom.io/widget/"+e;var n=r.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}),t)};"complete"===document.readyState?u():n.attachEvent?n.attachEvent("onload",u):n.addEventListener("load",u,!1)}}(u,v),f&&o("onHide",f),m&&o("onShow",m),h&&o("onUnreadCountChange",h),s&&C(d),y.current=!0);var k=e.useCallback((function(e,t){if((window.Intercom||w)&&_.current)return t()}),[w]),I=e.useCallback((function(){_.current&&(o("shutdown"),_.current=!1)}),[]),S=e.useCallback((function(){_.current&&(o("shutdown"),delete window.Intercom,delete window.intercomSettings,_.current=!1)}),[]),E=e.useCallback((function(){k("update",(function(){var e=(new Date).getTime();o("update",{last_requested_at:e})}))}),[k]),M=e.useCallback((function(e){k("update",(function(){if(e){var n=i(e);window.intercomSettings=t({},window.intercomSettings,n),o("update",n)}else E()}))}),[k,E]),O=e.useCallback((function(){k("hide",(function(){o("hide")}))}),[k]),j=e.useCallback((function(){k("show",(function(){return o("show")}))}),[k]),z=e.useCallback((function(){k("showMessages",(function(){o("showMessages")}))}),[k]),B=e.useCallback((function(e){k("showNewMessage",(function(){e?o("showNewMessage",e):o("showNewMessage")}))}),[k]),P=e.useCallback((function(){return k("getVisitorId",(function(){return o("getVisitorId")}))}),[k]),T=e.useCallback((function(e){k("startTour",(function(){o("startTour",e)}))}),[k]),x=e.useCallback((function(e,t){k("trackEvent",(function(){t?o("trackEvent",e,t):o("trackEvent",e)}))}),[k]),N=e.useMemo((function(){return{boot:C,shutdown:I,hardShutdown:S,update:M,hide:O,show:j,showMessages:z,showNewMessages:B,getVisitorId:P,startTour:T,trackEvent:x}}),[C,I,S,M,O,j,z,B,P,T,x]),q=e.useMemo((function(){return l}),[l]);return e.createElement(r.Provider,{value:N},q)},exports.useIntercom=function(){return e.useContext(r)};
//# sourceMappingURL=react-use-intercom.cjs.production.min.js.map
